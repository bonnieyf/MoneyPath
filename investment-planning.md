# 理財預測應用 - 投資與存款功能規劃

## 📊 整體財務面板架構

### 現有功能模組
1. **💰 收入設定** - 月薪/年薪
2. **💳 固定支出管理** - 各種支出類型
3. **📁 CSV 匯入** - 批量數據匯入
4. **📋 預測設定** - 預測月數
5. **📈 結果顯示** - 圖表和明細

### 新增功能模組
6. **💎 投資理財計劃** - 存款與投資設定
7. **📤 數據匯出** - CSV 匯出功能

## 💎 投資理財計劃功能設計

### 輸入欄位
- **每月存款金額**: 固定存入銀行的金額
- **每月投資金額**: 投入股票、基金等的金額
- **年化報酬率**: 投資預期報酬率 (%)
- **投資風險等級**: 保守/穩健/積極 (影響報酬率建議)
- **複利計算**: 是否啟用複利計算

### 計算邏輯
```javascript
每月可用餘額 = 月收入 - 月支出
可分配金額 = 每月可用餘額
存款累積 = 每月存款 × 月數
投資累積 = 每月投資 × 複利成長
總資產 = 現金餘額 + 存款累積 + 投資累積
```

### 投資計算公式
```
月報酬率 = 年化報酬率 / 12
第N月投資價值 = Σ(每月投資額 × (1 + 月報酬率)^(N-i))
```

## 📈 線條圖規劃

### 三條線設計
1. **💰 現金累積線** (綠色) - 原有的累積金額
2. **🏦 存款累積線** (藍色) - 存款專用資金
3. **📊 投資累積線** (橘色) - 投資組合價值

### 圖表增強
- **Y軸**: 金額 (NTD)
- **X軸**: 月份
- **圖例**: 區分三種資產類型
- **工具提示**: 顯示各月詳細數值

## 📤 CSV 匯出功能

### 匯出內容
1. **支出清單匯出**
   - 所有輸入的支出項目
   - 包含完整欄位信息
   
2. **月度預測匯出**
   - 每月收支明細
   - 投資和存款預測
   - 累積資產變化

### 匯出格式
```csv
# 支出清單
繳費日期,項目名稱,金額,類型,銀行,已繳期數,總期數,計算方式,周期天數

# 月度預測
月份,收入,支出,淨收入,存款,投資,投資累積,總資產
```

## 🎯 UI/UX 設計考慮

### 佈局調整
- 投資計劃放在支出管理後面
- 匯出按鈕放在支出區塊的右上角
- 結果區塊擴展顯示三類資產

### 視覺設計
- 投資區塊使用漸層背景 (橘色系)
- 存款使用藍色系
- 保持與現有設計一致的風格

### 響應式考慮
- 手機版將投資設定簡化
- 圖表在小螢幕上保持可讀性

## 🔄 與現有功能整合

### 數據流程
```
收入設定 → 支出計算 → 可用餘額 → 投資分配 → 總資產預測
```

### 驗證邏輯
- 投資 + 存款 ≤ 可用餘額
- 提供智能分配建議
- 風險等級對應報酬率範圍

## 📊 預期結果展示

### 摘要面板增強
- 月平均投資收益
- 預測期末總資產
- 投資報酬率實現

### 月度明細增強  
- 每月投資損益
- 存款利息收入
- 資產配置比例

這個規劃將讓用戶能夠：
1. 清楚看到收支後的可投資金額
2. 預測不同投資策略的結果
3. 比較存款與投資的長期效益
4. 匯出數據進行進一步分析